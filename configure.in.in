dnl -- check for the artsgui library
AC_DEFUN(AC_PATH_LIBARTSGUI,
[
        AC_MSG_CHECKING([for libartsgui])
        ac_artsgui_libraries=NO

artsgui_libdirs="/usr/lib /usr/local/lib /usr/local/kde3/lib $prefix/lib $exec_prefix/lib $kde_extra_libs"

artsgui_libdir=NONE
for dir in $artsgui_libdirs; do
        try="ls -1 $dir/libartsgui*"
                if test=`eval $try 2> /dev/null`; then artsgui_libdir=$dir; break; else echo "tried $dir" >&AC_FD_CC ; fi
done
 
ac_artsgui_libraries="$artsgui_libdir"


if test "$ac_artsgui_libraries" = NO; then
        have_artsgui=no
        DO_NOT_COMPILE="$DO_NOT_COMPILE amarok"
else
        have_artsgui=yes;
fi

eval "$ac_cv_have_artsgui"
])

AC_PATH_LIBARTSGUI

taglib_bindirs="/usr/bin /usr/local/bin /usr/local/kde3/bin $prefix/bin $exec_prefix/bin "

taglib_bindir=NONE
for tag_dir in $taglib_bindirs; do
        tag_try="ls -1 $tag_dir/$TAGLIB_CONFIG"
                if test=`eval $tag_try 2> /dev/null`; then taglib_bindir=$tag_dir; break; else echo "tried $tag_dir" >&AC_FD_CC ; fi
done

if test "$ac_artsgui_libraries" = NO; 
then
        AC_MSG_RESULT([not found.  amaroK build will be disabled.])
else
	AC_MSG_RESULT([found in $ac_artsgui_libraries])
fi

dnl ---------- TAGLIB CHECK ----------

AC_DEFUN(VERSION_TO_NUMBER, [`$1 | awk 'BEGIN { FS = "."; } { printf "%d",  ([$]1* 1000 + [$]2) * 1000 + [$]3;}'`])

AC_DEFUN(AC_HAVE_TAGLIB,
[
	AC_DEFINE(HAVE_TAGLIB, 1, [have TagLib])
	taglib_includes=[`$TAGLIB_CONFIG --cflags`]
	taglib_libs=[`$TAGLIB_CONFIG --libs`]
	taglib_version=[`$TAGLIB_CONFIG --version`]
	have_taglib=true
])

AC_DEFUN(AC_NO_TAGLIB,
[
	AC_DEFINE(HAVE_TAGLIB, 0, [don't have TagLib])
	taglib_includes=""
	taglib_libs=""
	taglib_version=""
	have_taglib=false
])

AC_PATH_PROG(TAGLIB_CONFIG, taglib-config, no)
if test "x$TAGLIB_CONFIG" = "xno" ; then
	AC_NO_TAGLIB
else
	AC_HAVE_TAGLIB
fi

AC_SUBST(taglib_includes)
AC_SUBST(taglib_libs)

dnl ---------- END TAGLIB CHECK ----------
